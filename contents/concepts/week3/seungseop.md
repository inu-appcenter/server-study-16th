# 3ì£¼ì°¨_ê°ì²´ì˜ ì§ë ¬í™”ì™€ ì—­ì§ë ¬í™”ëŠ” ë¬´ì—‡ì¼ê¹Œìš”? /  @RequestMappingê³¼ @ModelAttributeì˜ ê°’ ë§¤í•‘ì€ ì–´ë–»ê²Œ ì´ë¤„ì§€ë‚˜ìš”?

ìƒì„±ì¼: 2024ë…„ 4ì›” 15ì¼ ì˜¤í›„ 2:56
íƒœê·¸: ì„œë²„ ìŠ¤í„°ë””

# ê°ì²´ì˜ ì§ë ¬í™”, ì—­ì§ë ¬í™”

![img1 daumcdn](https://github.com/inu-appcenter/server-study-16th/assets/86196038/63e6a86c-f838-49fc-8ae3-c692468b3048)

> ***ì§ë ¬í™”** : ê°ì²´ì— ì €ì¥ëœ ë°ì´í„°ë¥¼ I/O ìŠ¤íŠ¸ë¦¼ì— ì“°ê¸°(ì¶œë ¥) ìœ„í•´ ì—°ì†ì ì¸(serial) ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒ*
> 
> 
> ***ì—­ì§ë ¬í™”** : I/O ìŠ¤íŠ¸ë¦¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì„œ(ì…ë ¥) ê°ì²´ë¥¼ ë§Œë“œëŠ” ê²ƒ*
> 
> - *ìŠ¤íŠ¸ë¦¼?*
>     
>     <aside>
>     ğŸ’¡ ***ìŠ¤íŠ¸ë¦¼**ì€ í´ë¼ì´ì–¸íŠ¸ë‚˜ ì„œë²„ ê°„ì— ì¶œë°œì§€ ëª©ì ì§€ë¡œ ì…ì¶œë ¥í•˜ê¸° ìœ„í•œ ë°ì´í„°ê°€ íë¥´ëŠ” í†µë¡œë¥¼ ë§í•œë‹¤.
>     ìë°”ëŠ” ìŠ¤íŠ¸ë¦¼ì˜ ê¸°ë³¸ ë‹¨ìœ„ë¥¼ ë°”ì´íŠ¸ë¡œ ë‘ê³  ìˆê¸° ë•Œë¬¸ì—, ë„¤íŠ¸ì›Œí¬, ë°ì´í„°ë² ì´ìŠ¤ë¡œ ì „ì†¡í•˜ê¸° ìœ„í•´ ìµœì†Œ ë‹¨ìœ„ì¸ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.*
>     
>     </aside>
>     

### **ìë°” ì§ë ¬í™”,** **ì—­ì§ë ¬í™”**

ìë°”ì—ì„œ ì§ë ¬í™”ì™€ ì—­ì§ë ¬í™”ëŠ” ê°ì²´ë¥¼ íŒŒì¼ë¡œ ì €ì¥í•˜ê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ì „ì†¡í•˜ê¸° ìœ„í•´ ì œê³µë˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

ê°ì²´ëŠ” â€˜ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ì§‘í•©â€™ì´ë¯€ë¡œ ê°ì²´ë¥¼ ì €ì¥/ì „ì†¡í•˜ëŠ” ê²ƒì€ ê°ì²´ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ì˜ ê°’ì„ ì €ì¥/ì „ì†¡í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•˜ë‹¤.
**

ì‹œìŠ¤í…œì ìœ¼ë¡œ ë³´ë©´, JVMì˜ í™(heap) í˜¹ì€ ìŠ¤íƒ(Stack) ë©”ëª¨ë¦¬ì— ìƒì£¼í•˜ê³  ìˆëŠ” ê°ì²´ ë°ì´í„°ë¥¼ ì§ë ¬í™”ë¥¼ í†µí•´ ë°”ì´íŠ¸ í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ë°ì´í„°ë² ì´ìŠ¤ë‚˜ íŒŒì¼ê³¼ ê°™ì€ ì™¸ë¶€ ì €ì¥ì†Œì— ì €ì¥í•´ë‘ê³ , ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ì´ íŒŒì¼ì„ ê°€ì ¸ì™€ ì—­ì§ë ¬í™”ë¥¼ í†µí•´ ìë°” ê°ì²´ë¡œ ë³€í™˜í•´ì„œ JVM ë©”ëª¨ë¦¬ì— ì ì¬í•œë‹¤ê³  ë³´ë©´ ëœë‹¤. 

**ì§ë ¬í™”ê°€ í•„ìš”í•œ ì´ìœ **

ìë°”ì—ëŠ” ì›ì‹œíƒ€ì…(Primitive Type)ì´ byte, short, int, long, float, double, boolean, char ì´ 8ê°€ì§€ê°€ ìˆë‹¤. 

ê·¸ë¦¬ê³  ê·¸ ì™¸ì˜ ê°ì²´ë“¤ì€ ì£¼ì†Œê°’ì„ ê°–ëŠ” ì°¸ì¡°í˜• íƒ€ì…ì´ë‹¤.

![image-20230414201817935](https://github.com/inu-appcenter/server-study-16th/assets/86196038/0ed8adbf-0fae-4394-9425-5ca370757c67)

ì›ì‹œíƒ€ì…ì€ stackì—ì„œ ê°’ ê·¸ ìì²´ë¡œ ê°–ê³  ìˆì–´ ì™¸ë¶€ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•  ë•Œ, **ê°’ì„ ì¼ì •í•œ í˜•ì‹ì˜ raw byte í˜•íƒœë¡œ ë³€ê²½í•˜ì—¬ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤.** 

í•˜ì§€ë§Œ, ìœ„ ê·¸ë¦¼ê³¼ ê°™ì´ ê°ì²´ì˜ ê²½ìš° ì‹¤ì œë¡œëŠ” **Heap ì˜ì—­ì— ì¡´ì¬í•˜ê³  ìŠ¤íƒì—ì„œ Heap ì˜ì—­ì— ì¡´ì¬í•˜ëŠ” ê°ì²´ì˜ ì£¼ì†Œ (ë©”ëª¨ë¦¬ ì£¼ì†Œ)ë¥¼ ê°–ê³  ìˆë‹¤.**

ì´ ì£¼ì†Œ ê°’ì„ ê·¸ëŒ€ë¡œ ë‹¤ë¥¸ ê³³ì— ë³´ë‚¸ë‹¤ê³  í•˜ì.

ë§Œì•½ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë˜ê±°ë‚˜ ê°ì²´ê°€ ì“¸ëª¨ì—†ë‹¤ê³  íŒë‹¨ë˜ë©´ Heap ì˜ì—­ì— ìˆë˜ ë°ì´í„°ëŠ” ì œê±°ëœë‹¤. ì¦‰, ë©”ëª¨ë¦¬ì—ì„œ ë°ì´í„°ê°€ ì‚­ì œëœë‹¤.

ì™¸ë¶€ë¡œ ì „ì†¡í–ˆì„ ë•Œì—ë„, ì „ì†¡ë°›ì€ ê¸°ê¸°ì˜ ì „ë‹¬ë°›ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œì— ì „ì†¡í•˜ë ¤í–ˆë˜ ë°ì´í„°ëŠ” ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. 

ë”°ë¼ì„œ ì´ ì£¼ì†Œ ê°’ì˜ ë°ì´í„°(ì‹¤ì²´)ë¥¼ Primitiveí•œ ê°’ í˜•ì‹ì˜ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ê±°ì¹œ í›„ ì „ë‹¬í•´ì•¼ í•˜ë©° ì§ë ¬í™”ë¥¼ í†µí•´ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### **ìë°” ì§ë ¬í™”, ì—­ì§ë ¬í™” ë°©ë²•**

ìë°”ì—ì„œëŠ” ê°ì²´ì˜ ì§ë ¬í™”, ì—­ì§ë ¬í™”ë¥¼ ìœ„í•´ ObjectInputStreamê³¼ ObjectOutputStreamì„ ì œê³µí•œë‹¤.

ì´ëŠ” ê°ì²´ë¥¼ ìŠ¤íŠ¸ë¦¼ì— ì“°ê±°ë‚˜(ì¶œë ¥) ì½ëŠ” ê¸°ëŠ¥(ì…ë ¥)ì„ ì œê³µí•˜ëŠ” ë³´ì¡° ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ

ObjectOutputStreamì€ ì§ë ¬í™”, ìŠ¤íŠ¸ë¦¼ì— ê°ì²´ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ê³ 

ObjectInputStreamì€ ì—­ì§ë ¬í™”, ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œë¶€í„° ê°ì²´ë¥¼ ì…ë ¥ ë°›ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

ê°„ë‹¨í•œ ì˜ˆì œë¥¼ ë³´ë©´

```java
public class Member implements Serializable {
    
    String name;
    transient String password;  // ì§ë ¬í™” ëŒ€ìƒì—ì„œ ì œì™¸ë˜ì–´ ì§ë ¬í™” ì‹œ null ì²˜ë¦¬
}
```

ë¨¼ì € ì§ë ¬í™” í•˜ê³ ì í•˜ëŠ” ê°ì²´ëŠ” java.io.Serializable ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ì—¬ì•¼ í•œë‹¤. Serializable ì¸í„°í˜ì´ìŠ¤ëŠ” ê¸°ëŠ¥ì´ ì—†ê³  ë‹¨ìˆœíˆ ê°ì²´ ì§ë ¬í™”ë¥¼ ëª…ì‹œí•˜ëŠ” ìš©ë„ì˜ ë§ˆí¬ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.

ë˜í•œ ì§ë ¬í™”ì—ì„œ ì œì™¸í•˜ê³  ì‹¶ì€ ëŒ€ìƒì€ transientë¥¼ ë¶™ì—¬ ì œì™¸í•  ìˆ˜ ìˆë‹¤. transient í•„ë“œëŠ” null(ì°¸ì¡°í˜•) ë˜ëŠ” íƒ€ì…ì˜ ê¸°ë³¸ê°’ìœ¼ë¡œ ë°˜í™˜ëœë‹¤.

```java
// ê°ì²´ë¥¼ ì§ë ¬í™”í•˜ì—¬ íŒŒì¼ì— ì €ì¥
ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("objectfile.ser"));
oos.writeObject(new Member());

// íŒŒì¼ë¡œë¶€í„° ê°ì²´ë¥¼ ì½ì–´ ê°ì²´ ìƒì„±
ObjectInputStream ois = new ObjectInputStream(new FileInputStream("objectfile.ser"));
Member member = (Member) ois.readObject();  // Objectë¡œ ë¦¬í„´ë˜ë¯€ë¡œ ëª…ì‹œì  í˜•ë³€í™˜ í•„ìš”
```

Serializableë¡œ ë§ˆí¬ëœ ê°ì²´ëŠ” writeObject()ë¥¼ í†µí•´ ì§ë ¬í™”ë¥¼ í•˜ê³  readObject()ë¥¼ í†µí•´ ì—­ì§ë ¬í™”ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

### **JSON ì§ë ¬í™”, ì—­ì§ë ¬í™”**

ì§ì „ì— ì„¤ëª…í•œ ìë°” ì§ë ¬í™”/ì—­ì§ë ¬í™”ëŠ” JVMê³¼ ObjectOutputStream/ObjectIntputStreamì— ìœ„ì„í•˜ì—¬ ë°”ì´íŠ¸ í˜•íƒœì™€ ì „í™˜í•˜ëŠ” ë°©ì‹ì´ì—ˆì§€ë§Œ XML, JSONê³¼ ê°™ì€ í¬ë§·ìœ¼ë¡œì˜ ì§ë ¬í™”ë„ ê°€ëŠ¥í•˜ë‹¤. 

ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” JSON ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ì—¬ëŸ¬ê°€ì§€ê°€ ìˆë‹¤.

- Jackson
- Google-gson
- JSON-lib
- Flexjson
- Json-io
- Genson
- JSONij

ì´ ì¤‘ ê°€ì¥ ì˜ ì•Œë ¤ì ¸ ìˆìœ¼ë©° ëŒ€í‘œì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Jacksonì´ë‹¤.

Jackson ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œëŠ” ObjectMapperë¥¼ ì‚¬ìš©í•´ Object - JSONì˜ ì§ë ¬í™”, ì—­ì§ë ¬í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.

ObjectMapperì— ëŒ€í•´ì„œëŠ” ë’¤ì—ì„œ ì„¤ëª…í•˜ê² ë‹¤.

### **ìë°” ì§ë ¬í™” vs JSON**

JSONì€ ì›¹(Web) ë¿ë§Œ ê²Œì„ ìª½ì—ì„œë„ ì„¤ì • íŒŒì¼ë¡œ ì“°ì´ê±°ë‚˜ ë°ì´í„°ë¥¼ êµí™˜ í•  ë•Œ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤. 

ì‹¤ì œë¡œ ë°”ì´íŠ¸ë¡œ ì§ë ¬í™”ê°€ ì˜¤ë¡œì§€ ìë°” í”„ë¡œê·¸ë¨ì—ì„œë§Œ ì‚¬ìš©ì´ ê°€ëŠ¥í•œ ê²ƒê³¼ ë‹¬ë¦¬, JSON í˜•íƒœë¡œ ê°ì²´ ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘ë©´ íŒŒì´ì¬, ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œë„ ë²”ìš©ì ìœ¼ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

ë•Œë¬¸ì— JSONìœ¼ë¡œì˜ ì§ë ¬í™”ê°€ ê°€ëŠ¥í•˜ë‹¤ë©´ êµ³ì´ ë°”ì´íŠ¸ë¡œ ë³€í™˜í•˜ëŠ” ìë°” ì§ë ¬í™”ê°€ í•„ìš”í•œì§€ ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ ìë°” ì§ë ¬í™”ë„ ì¥ì ì´ ìˆë‹¤.

**ìë°” ì§ë ¬í™”ì˜ ì¥ì **

1. ì§ë ¬í™”ëŠ” ìë°”ì˜ ê³ ìœ  ê¸°ìˆ ì¸ ë§Œí¼ ìë°” ì‹œìŠ¤í…œì—ì„œ ê°œë°œì— ìµœì í™” ë˜ì–´ìˆë‹¤.
2. ìë°”ì˜ ê´‘í™œí•œ ë ˆí¼ëŸ°ìŠ¤ íƒ€ì…ì— ëŒ€í•´ ì œì•½ ì—†ì´ ì™¸ë¶€ì— ë‚´ë³´ë‚¼ ìˆ˜ ìˆë‹¤.

ê¸°ë³¸í˜•(int, double, string) íƒ€ì…ì´ë‚˜ ë°°ì—´(array)ì™€ ê°™ì€ íƒ€ì…ë“¤ì€ ì™ ë§Œí•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ê°€ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” íƒ€ì…ì´ê¸° ë•Œë¬¸ì—, ì´ëŸ¬í•œ ê°’ë“¤ì€ JSONë§Œìœ¼ë¡œë„ ì¶©ë¶„íˆ ìƒí˜¸ ì´ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

í•˜ì§€ë§Œ ìë°”ì˜ ì˜¨ê°– ì»¬ë ‰ì…˜ì´ë‚˜ í´ë˜ìŠ¤, ì¸í„°í˜ì´ìŠ¤ íƒ€ì… í˜¹ì€ ì‚¬ìš©ìê°€ ìƒì„±í•œ ì»¤ìŠ¤í…€ ìë£Œí˜• íƒ€ì…ì€ ì™¸ë¶€ì— ë‚´ë³´ë‚´ê¸° ìœ„í•´ì„  ê° ë°ì´í„°ë¥¼ ë§¤ì¹­ì‹œí‚¤ëŠ” ë³„ë„ì˜ íŒŒì‹±ì´ í•„ìš”í•˜ë‹¤.

ê·¸ì— ë°˜í•´ ì§ë ¬í™”ë¥¼ ì´ìš©í•˜ë©´ ë¹„ë¡ íŒŒì´ì¬ì´ë‚˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ì™€ ê°™ì€ ë‹¤ë¥¸ ì‹œìŠ¤í…œì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ëª»í• ì§€ë¼ë„, ì§ë ¬í™” ê¸°ë³¸ ì¡°ê±´ë§Œ ì§€í‚¨ë‹¤ë©´ í•˜ë“œí•œ ì‘ì—… ì—†ì´ ë°”ë¡œ ì™¸ë¶€ì— ë³´ë‚¼ ìˆ˜ê°€ ìˆë‹¤. 

ê·¸ë¦¬ê³  ì—­ì§ë ¬í™”ë¥¼ í†µí•´ ì½ì–´ ë“¤ì´ë©´ ë°ì´í„° íƒ€ì…ì´ ìë™ìœ¼ë¡œ ë§ì¶°ì§€ê¸° ë•Œë¬¸ì— ë³„ë„ì˜ íŒŒì‹± ì—†ì´ ìë°” í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ë“¤ì„ ê³§ë°”ë¡œ ë‹¤ì‹œ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ê·¸ë˜ì„œ ì§ë ¬í™”ëœ ë¬¸ìì—´ì„ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•´ë‘ê³  êº¼ë‚´ì“°ê¸°ë„ í•œë‹¤.

**ìë°” ì§ë ¬í™”ì˜ ë¬¸ì œì **

ìœ„ì—ì„œëŠ” ì¥ì ì„ ì´ì•¼ê¸° í–ˆì§€ë§Œ ì‚¬ì‹¤ ì§ë ¬í™”ëŠ” ì¥ì ë³´ë‹¤ëŠ” ë‹¨ì ì´ ê·¹ëª…í•˜ê²Œ ë§ë‹¤. ë•Œë¬¸ì— ìë°” ì§ë ¬í™”ì˜ ë¬¸ì œì ì„ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê² ë‹¤.

- ì§ë ¬í™”ëŠ” ìš©ëŸ‰ì´ í¬ë‹¤
    - ì§ë ¬í™”ëŠ” ê°ì²´ì˜ ë°ì´í„° ë¿ ì•„ë‹ˆë¼ íƒ€ì… ì •ë³´, í´ë˜ìŠ¤ ë©”íƒ€ ì •ë³´ë„ ê°–ê³  ìˆìœ¼ë¯€ë¡œ ìš©ëŸ‰ì„ ë§ì´ ì°¨ì§€í•œë‹¤.
    JSONê³¼ ë¹„êµí•˜ìë©´ íŒŒì¼ ìš©ëŸ‰ í¬ê¸°ê°€ ê±°ì˜ 2ë°° ì´ìƒ ì°¨ì´ê°€ ë‚œë‹¤.
- ì—­ì§ë ¬í™”ëŠ” ìœ„í—˜í•˜ë‹¤
    - ì§ë ¬í™” ì„¤ì • ìì²´ëŠ” ë¬¸ì œ ì—†ì§€ë§Œ, ë‚¨ì´ ë§Œë“  ê²ƒì„ ì—­ì§ë ¬í™” í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚˜ë„ ëª¨ë¥´ê²Œ ê³µê²© ë‹¹í•  ìœ„í—˜ì„±ì´ ìˆë‹¤.
    ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì—­ì§ë ¬í™” í•˜ëŠ” ObjectInputStreamì˜ readObject() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ ê°ì²´ ê·¸ë˜í”„ê°€ ì—­ì§ë ¬í™” ë˜ì–´ classpath ì•ˆì˜ ëª¨ë“  íƒ€ì…ì˜ ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë‚´ê²Œ ë˜ëŠ”ë°, í•´ë‹¹ íƒ€ì… ê°ì²´ ì•ˆì˜ ëª¨ë“  ì½”ë“œë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆê²Œ ë˜ë¯€ë¡œ ë‚˜ì˜ í”„ë¡œê·¸ë¨ ì½”ë“œ ì „ì²´ê°€ ê³µê²© ë²”ìœ„ì— ë“¤ì–´ê°€ê²Œ ëœë‹¤.
    - ë˜ëŠ” ê°ì²´ë¥¼ ì§ë ¬í™” í•˜ì—¬ ì™¸ë¶€ë¡œ ì „ì†¡í•˜ëŠ” ê³¼ì •ì—ì„œ ì¤‘ê°„ì— ëˆ„ê°€ ê°€ë¡œì±„ íŒŒì¼ ë°”ì´íŠ¸ ë‚´ìš©ì„ ì¡°ì‘í•˜ë©´, ì†¡ì‹ ìê°€ ì—­ì§ë ¬í™” í•˜ëŠ” ê³¼ì •ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ì— ìœ„í—˜í•œ ê°’ì„ ëŒ€ì…ì‹œì¼œ ë¶ˆë³€ì„ ê¹¨ëŠ” ì‹ìœ¼ë¡œì˜ ê³µê²©ì´ ê°€ëŠ¥í•´ì§„ë‹¤.
    ì´ëŠ” ì—­ì§ë ¬í™”ëŠ” ìƒì„±ì ì—†ì´ ì¸ìŠ¤í„´ìŠ¤í™”ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤.
- ë¦´ë¦¬ì¦ˆ í›„ì— ìˆ˜ì •ì´ ì–´ë µë‹¤
    - í´ë˜ìŠ¤ê°€ Serializableì„ êµ¬í˜„í•˜ê²Œ ë˜ë©´ ì§ë ¬í™” ëœ ë°”ì´íŠ¸ ìŠ¤íŠ¸ë¦¼ ì¸ì½”ë”©ë„ í•˜ë‚˜ì˜ ê³µê°œ APIê°€ ë˜ëŠ” ê²ƒì´ë‹¤.
    ì§ë ¬í™”ë¥¼ êµ¬í˜„í•œ í´ë˜ìŠ¤ê°€ ë„ë¦¬ í¼ì§€ë©´ ì§ë ¬í™” í˜•íƒœë„ ì˜ì›íˆ ì§€ì›í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ì˜ ìœ ì§€ë³´ìˆ˜ê°€ ì§ë ¬í™”ì— ë¬¶ì´ê²Œ ëœë‹¤.
- í´ë˜ìŠ¤ ìº¡ìŠí™”ê°€ ê¹¨ì§„ë‹¤
    - ë§Œì•½ ì§ë ¬í™”í•  í´ë˜ìŠ¤ì— private ë©¤ë²„ê°€ ìˆì–´ë„ ì§ë ¬í™”ë¥¼ í•˜ê²Œ ë˜ë©´ ê·¸ëŒ€ë¡œ ì™¸ë¶€ë¡œ ë…¸ì¶œë˜ê²Œ ëœë‹¤. 
    ì§ë ¬í™”ë¥¼ ì œì™¸í•˜ë ¤ë©´ ë³„ë„ë¡œ transient ì„¤ì •ì„ í•´ì•¼í•œë‹¤.
    ë”°ë¼ì„œ Serializableì„ êµ¬í˜„í•˜ë©´ ì§ë ¬í™” í˜•íƒœê°€ í•˜ë‚˜ì˜ ê³µê°œ APIê°€ ë˜ì–´ ìº¡ìŠí™”ê°€ ê¹¨ì§„ë‹¤.
- ë²„ê·¸ì™€ ë³´ì•ˆì— ì·¨ì•½í•˜ë‹¤
    - ìë°”ì—ì„œëŠ” ê°ì²´ë¥¼ ìƒì„±ìë¥¼ ì´ìš©í•´ ë§Œë“œëŠ” ê²ƒì´ ê¸°ë³¸ì´ë‹¤. 
    í•˜ì§€ë§Œ ì—­ì§ë ¬í™”ëŠ” ì–¸ì–´ì˜ ê¸°ë³¸ ë§¤ì»¤ë‹ˆì¦˜ì„ ìš°íšŒí•˜ì—¬ ê°ì²´ë¥¼ ë°”ë¡œ ìƒì„±í•˜ë„ë¡ í•œë‹¤. 
    ë§Œì•½ ì–´ëŠ ê°ì²´ê°€ ìƒì„±ìë¥¼ í†µí•´ ì¸ìŠ¤í„´ìŠ¤í™” í•  ë•Œ ë¶ˆë³€ì‹ì´ë‚˜ í—ˆê°€ë˜ì§€ ì•ŠëŠ” ì ‘ê·¼ì„ ì„¤ì •í•˜ì˜€ì„ ê²½ìš°, ì´ë¥¼ ë¬´ì‹œí•˜ê³  ìƒì„±ëœë‹¤ëŠ” ë¬¸ì œê°€ ìˆë‹¤.
    ë‹¤ë§Œ ì´ ë¶€ë¶„ì€ ì—­ì§ë ¬í™” ë°©ì–´ ê¸°ë²• ì¤‘ í•˜ë‚˜ì¸ ì§ë ¬í™” í”„ë¡ì‹œ íŒ¨í„´ìœ¼ë¡œ ê·¹ë³µí•  ìˆ˜ ìˆë‹¤.
- ìƒˆë¡œìš´ ë²„ì „ì„ ë¦´ë¦¬ì¦ˆí•  ë•Œ í…ŒìŠ¤íŠ¸ ìš”ì†Œê°€ ë§ì•„ì§„ë‹¤
    - ë§Œì¼ ì§ë ¬í™” ê°€ëŠ¥í•œ í´ë˜ìŠ¤ê°€ ì—…ë°ì´íŠ¸ ë˜ë©´ êµ¬ë²„ì „ì˜ ì§ë ¬í™” í˜•íƒœê°€ ì‹ ë²„ì „ì—ì„œ ì—­ì§ë ¬í™”ê°€ ê°€ëŠ¥í•œì§€ í…ŒìŠ¤íŠ¸ í•´ì•¼ í•œë‹¤. 
    ì¦‰, í…ŒìŠ¤íŠ¸ì˜ ì–‘ì´ ì§ë ¬í™” ê°€ëŠ¥ í´ë˜ìŠ¤ì˜ ìˆ˜ì™€ ë¦´ë¦¬ì¦ˆ íšŸìˆ˜ì— ë¹„ë¡€í•˜ê²Œ ëœë‹¤.
- ìƒì†ìš© í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ì— ì§ë ¬í™” êµ¬í˜„ì„ ì£¼ì˜í•´ì•¼ í•œë‹¤.
    - ìƒì† ëª©ì ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ë¥¼ Serializableë¡œ êµ¬í˜„í•œë‹¤ëŠ” ê²ƒì€, ìœ„ì—ì„œ ì–¸ê¸‰í•œ ìë°” ì§ë ¬í™”ì˜ ìœ„í—˜ì„±ì„ ê³ ìŠ¤ë€íˆ í•˜ìœ„ í´ë˜ìŠ¤ì— ì „ì´í•˜ê²Œ ë˜ëŠ” ê²ƒê³¼ ë‹¤ë¦„ì´ ì—†ë‹¤.
- ë‚´ë¶€ í´ë˜ìŠ¤ëŠ” ì§ë ¬í™”ë¥¼ êµ¬í˜„í•˜ë©´ ì•ˆëœë‹¤
    - ë‚´ë¶€ í´ë˜ìŠ¤ (inner class)ì˜ ì§ë ¬í™” í˜•íƒœëŠ” ë¶ˆë¶„ëª…í•˜ì—¬ Serializableì„ êµ¬í˜„í•˜ë©´ ì•ˆëœë‹¤.
    ë‹¨, ì •ì  ë‚´ë¶€ í´ë˜ìŠ¤ (static inner class)ëŠ” Serializableì„ êµ¬í˜„í•´ë„ ìƒê´€ ì—†ë‹¤.

ì´ì²˜ëŸ¼ ìë°” ì§ë ¬í™”ì—ëŠ” ë§ì€ ë‹¨ì ê³¼ ìœ„í—˜ ìš”ì†Œê°€ ì¡´ì¬í•œë‹¤. 

ë•Œë¬¸ì— ê°€ê¸‰ì  JSON ë“±ì˜ ë°ì´í„° í‘œí˜„ì„ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì„ ì±„íƒí•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.

í•˜ì§€ë§Œ ì§ë ¬í™”ëŠ” 1997ë…„ì— íƒ„ìƒí•˜ì—¬ ì—¬ì „íˆ ìë°” ìƒíƒœê³„ ê³³ê³³ì— ì“°ì´ê³  ìˆë‹¤. ë§Œì•½ ì–´ì©” ìˆ˜ ì—†ì´ Serializableì„ êµ¬í˜„í•´ì•¼ í•œë‹¤ë©´ ìœ„ì˜ ë¬¸ì œì ì„ ì˜ ê³ ë ¤í•˜ì—¬ ì„¤ê³„í•´ì•¼ í•  ê²ƒì´ë‹¤.

# ìŠ¤í”„ë§ì—ì„œ ì§ë ¬í™”, ì—­ì§ë ¬í™”

ìŠ¤í”„ë§ì—ì„œ ê°ì²´ ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ ì£¼ê³  ë°›ì„ ë•Œ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì—ëŠ” ObjectMapperì™€ @RequestBody, @ResponseBodyê°€ ìˆê³  @RequestBody, @ResponseBodyëŠ” ë‚´ë¶€ì ìœ¼ë¡œ ObjectMapperë¥¼ ì‚¬ìš©í•œë‹¤.

ìŠ¤í”„ë§ ë¶€íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Jacksonì´ ë‚´ì¥ë˜ì–´ ìˆê³ , ìœ„ì—ì„œ ë§í–ˆ ë“¯ Jackson ë‚´ë¶€ì— ObjectMapper í´ë˜ìŠ¤ê°€ ìˆë‹¤. 

ì¦‰, ìŠ¤í”„ë§ì—ì„œ ì§ë ¬í™”, ì—­ì§ë ¬í™”ë¥¼ ì•Œë ¤ë©´ ObjectMapperì— ëŒ€í•´ì„œ ì•Œì•„ì•¼ í•œë‹¤.

### **ObjectMapper**

![img1 daumcdn 1](https://github.com/inu-appcenter/server-study-16th/assets/86196038/ba9c156c-0556-4d70-a7bf-de183a3eee85)

> ***ObjectMapper**ë€ Java Objectì™€ JSON ë°ì´í„° ê°„ í˜•íƒœë¥¼ ììœ ë¡­ê²Œ ë³€ê²½í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.*
> 

ObjectMapperëŠ” POJO, Plain Old Java Objectë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘í•œë‹¤. POJOëŠ” ê¸°ë³¸ ìƒì„±ì, getter, setterë¥¼ ê°€ì§„ ìë°” í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•œë‹¤. 

ê·¸ë˜ì„œ XXXë¼ëŠ” í•„ë“œê°€ ìˆë‹¤ë©´ ì§ë ¬í™” ì‹œÂ `getXXX`Â ë©”ì„œë“œë¡œ í•„ë“œ ê°’ì„ ì½ì–´ì„œ JSONìœ¼ë¡œ êµ¬ì¶•í•˜ê³ ,
ì—­ì§ë ¬í™” ì‹œ ê¸°ë³¸ ìƒì„±ìë¡œ ê°ì²´ë¥¼ ìƒì„±í•œ ë’¤Â `setXXX`Â ë©”ì„œë“œë¡œ í•„ë“œì— ê°’ì„ ì£¼ì…í•˜ê²Œ ëœë‹¤.

ë” ìì„¸íˆ ë³´ìë©´ ObjectMapperëŠ” ê¸°ë³¸ì ìœ¼ë¡œ public í•„ë“œë¥¼ ëŒ€ìƒìœ¼ë¡œ ì‚¼ëŠ”ë‹¤.
publicìœ¼ë¡œ ì„ ì–¸í•œ í•„ë“œëŠ” ìë™ìœ¼ë¡œ ë§¤í•‘ì´ ë˜ì§€ë§Œ í†µìƒ í´ë˜ìŠ¤ ì„ ì–¸ ì‹œì—ëŠ” í•„ë“œë¥¼ privateìœ¼ë¡œ ì„ ì–¸í•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ í•„ë“œë“¤ì„ ë§¤í•‘í•˜ê¸° ìœ„í•´ getter í˜¹ì€ setterë¥¼ ì‚¬ìš©í•œë‹¤.
ì´ ë•Œ, ObjectMapperëŠ” getterì™€ setterì˜ ë©”ì„œë“œëª… ì¤‘ get, setì„ ì œê±°í•œ ì´ë¦„ì˜ ì²« ë¬¸ìë¥¼ ì†Œë¬¸ìë¡œ ì¹˜í™˜í•˜ì—¬ í•„ë“œëª…ì„ ìœ ì¶”í•œë‹¤.
getterì™€ setterëŠ” private í•„ë“œë¥¼ ì¸ì‹í•˜ê²Œ í•´ì£¼ì§€ë§Œ ì§ë ¬í™”ì˜ ê²½ìš° setterë§Œìœ¼ë¡œëŠ” private í•„ë“œë¥¼ ì¸ì‹í•  ìˆ˜ê°€ ì—†ë‹¤. ì´ëŠ” getterë¥¼ ê°€ì§„ private í•„ë“œëŠ” propertyë¡œ ê°„ì£¼ë˜ì§€ë§Œ setterëŠ” ê·¸ë ‡ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.

ë°˜ëŒ€ë¡œ ì—­ì§ë ¬í™”ì˜ ê²½ìš°ì—ëŠ” setterë§Œ ìˆì–´ë„ private í•„ë“œë¥¼ ì¸ì‹í•  ìˆ˜ ìˆê³  ê°’ì„ ì£¼ì…í•  ìˆ˜ë„ ìˆë‹¤.

ê·¸ëŸ¬ë‚˜ ê°ì²´ì˜ ë¶ˆë³€ì„± ë³´ì¥ì„ ìœ„í•´ setterë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°ë„ ë§ë‹¤. 

ì´ ê²½ìš° private í•„ë“œë¥¼ ì¸ì‹í•˜ì—¬ í•„ë“œëª…ì„ ì•Œì•„ë‚´ëŠ” ë°ì—ëŠ” getterë¥¼ ì‚¬ìš©í•˜ê³ , ë°ì´í„°ë¥¼ ê°ì²´ì— ë°”ì¸ë”©í•  ë•Œì—ëŠ” ë¦¬í”Œë ‰ì…˜ì˜ í•„ë“œ ì ‘ê·¼ ë°©ì‹ì„ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.


ğŸ’¡ ***ë¦¬í”Œë ‰ì…˜ (Reflection)** ì€ êµ¬ì²´ì ì¸ í´ë˜ìŠ¤ íƒ€ì…ì„ ì•Œì§€ ëª»í•´ë„ ê·¸ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œ, íƒ€ì…, ë³€ìˆ˜ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ìë°” APIì´ë‹¤.*

ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ì—­ì§ë ¬í™”ì˜ ê²½ìš° ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìƒì„±ìê°€ í•„ìš”í•œë°, ObjectMapperëŠ” ê¸°ë³¸ ìƒì„±ìë¥¼ ì‚¬ìš©í•´ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  ì´í›„ ê°’ì„ ë°”ì¸ë”© í•  ë•Œ setter í˜¹ì€ ë¦¬í”Œë ‰ì…˜ì„ ì‚¬ìš©í•œë‹¤ëŠ” ì ì´ë‹¤.

ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë‹¤ë¥¸ ìƒì„±ìê°€ ìˆì–´ë„ @NoArgsContructorë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ì§ì ‘ ê¸°ë³¸ ìƒì„±ìë¥¼ ë§Œë“¤ì–´ì¤˜ì•¼ í•œë‹¤.

> ObjectMapperì—ì„œ ì¸ìë¥¼ ê°€ì§„ ìƒì„±ìê°€ ì•„ë‹ˆë¼ ê¸°ë³¸ ìƒì„±ìë¥¼ í†µí•´ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ì´ìœ ê°€ ë¦¬í”Œë ‰ì…˜ì´ ìƒì„±ìì˜ íŒŒë¼ë¯¸í„° ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì´ë¼ëŠ” ì´ì•¼ê¸°ê°€ ë§ì€ë°, ì´ëŠ” Java8 ì´ì „ê¹Œì§€ì˜ ì´ì•¼ê¸°ì´ê³  Java8 ì´í›„ë¶€í„°ëŠ” íŒŒë¼ë¯¸í„° ì •ë³´ë„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. 
ë‹¤ë§Œ ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œëŠ” ì—¬ì „íˆ ê¸°ë³¸ ìƒì„±ì ì—†ì´ ì—­ì§ë ¬í™”ëŠ” ë¶ˆê°€ëŠ¥í•˜ê³ , ë§Œì•½ ê¸°ë³¸ ìƒì„±ìë¥¼ ìƒì„±í•˜ì§€ ì•Šê³  ì—­ì§ë ¬í™”ë¥¼ í•˜ê³  ì‹¶ë‹¤ë©´ @jsonPropertyë¥¼ ì‚¬ìš©í•˜ì—¬ í•„ë“œ ì •ë³´ë¥¼ ëª…ì‹œí•´ì£¼ë©´ ê°€ëŠ¥í•˜ë‹¤.
> 

# ìŠ¤í”„ë§ì˜ ìš”ì²­ ë§¤í•‘

ìš”ì²­ ë§¤í•‘ì„ ë³´ê¸°ì— ì•ì„œ Controller í´ë˜ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ëŠ” ëª‡ ê°€ì§€ ì–´ë…¸í…Œì´ì…˜ì„ ë¨¼ì € ì‚´í´ë³´ê² ë‹¤.

- @ResponseBody
    - ë°˜í™˜ ê°’ì´ String ì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹í•´ì„œ ë·°ë¥¼ ì°¾ê³  ë·°ë¥¼ ë Œë”ë§ í•˜ë˜ ê²ƒê³¼ëŠ” ë‹¬ë¦¬ @ResponseBodyë¥¼ ë©”ì„œë“œ ìœ„ì— ë¶™ì´ë©´ ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²Œ ì•„ë‹ˆë¼, Stringì„ HTTP ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•œë‹¤.
- @RestController
    - @ResponseBodyë¥¼ ë©”ì„œë“œ ìœ„ì— ê°ê° ë¶™ì—¬ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹  @RestControllerë¥¼ í´ë˜ìŠ¤ ìœ„ì— ë¶™ì—¬ ì‚¬ìš©í•œë‹¤.
- @RequestMapping("/xxx")
    - /xxx URLì´ í˜¸ì¶œë˜ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
    - ëŒ€ë¶€ë¶„ì˜ ì†ì„±ì„ ë°°ì—´[]ë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë‹¤ì¤‘ ì„¤ì •ë„ ê°€ëŠ¥í•˜ë‹¤.
    - í´ë˜ìŠ¤ ìœ„ì— ë¶™ì—¬ ê³µí†µìœ¼ë¡œ ë“¤ì–´ê°ˆ ê²½ë¡œë¥¼ ì„¤ì • ê°€ëŠ¥í•˜ë‹¤.
    - ë©”ì„œë“œì—ì„œ ì‚¬ìš©ë  ë•Œì—ëŠ” ì¶•ì•½ ì–´ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì„œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
        
        > **@GetMapping**: GET ìš”ì²­ì¼ ê²½ìš°ë§Œ í˜¸ì¶œÂ  (= @RequestMapping(value="", method = RequestMethod.GET)
        **@PostMapping**: Post ìš”ì²­ì¼ ê²½ìš°ë§Œ í˜¸ì¶œ
        **@DeleteMapping**: Delete ìš”ì²­ì¼ ê²½ìš°ë§Œ í˜¸ì¶œ
        **@PatchMapping**: Patch ìš”ì²­ì¼ ê²½ìš°ë§Œ í˜¸ì¶œ
        **@PutMapping**: Put ìš”ì²­ì¼ ê²½ìš°ë§Œ í˜¸ì¶œ
        > 

### ìš”ì²­ ë§¤í•‘

- **@PathVariable ê²½ë¡œ ë³€ìˆ˜**

```java
@GetMapping("/mapping/{userId}/{orderId}")
public String mappingPath(@PathVariable("userId") String userId, @PathVariable("orderId") String orderId) {
    log.info("mappingPath userId ={}, orderId={}", userId, orderId);

    return "Ok";
}
```

ë©”ì†Œë“œ ë‚´ë¶€ì— @PathVariableë¥¼ ì‚¬ìš©í•´ ê²½ë¡œë³€ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

ë§Œì•½ @PathVariable ë³€ìˆ˜ ì´ë¦„ê³¼ ë§¤í•‘ëœ URL ë³€ìˆ˜ ì´ë¦„ì´ ê°™ë‹¤ë©´Â ****@PathVariableì„ ìƒëµí•  ìˆ˜ ìˆë‹¤.

**@RequestMapping - íŠ¹ì • íŒŒë¼ë¯¸í„° ì¡°ê±´ ë§¤í•‘ (params)**

```java
/**
 * íŒŒë¼ë¯¸í„°ë¡œ ì¶”ê°€ ë§¤í•‘
 * params="mode",
 * params="!mode"
 * params="mode=debug"
 * params="mode!=debug" (! = )
 * params = {"mode=debug","data=good"}
 */
@GetMapping(value = "/mapping-param", params = "mode=debug")
public String mappingParam() {
    log.info("mappingParam");
    return "ok";
}
```

íŠ¹ì • íŒŒë¦¬ë¯¸í„°ê°€ ìˆê±°ë‚˜ ì—†ëŠ” ì¡°ê±´ì„ ì¶”ê°€í•  ìˆ˜ ìˆìœ¼ë‚˜ ì˜ ì‚¬ìš©í•˜ì§„ ì•ŠëŠ”ë‹¤.

ìœ„ ì½”ë“œëŠ” ë‹¤ìŒ ìš”ì²­ URLë¡œ í˜¸ì¶œí•œë‹¤.

> localhost:8080/mapping-param?mode=debug
> 

**@RequestMapping - íŠ¹ì • í—¤ë” ì¡°ê±´ ë§¤í•‘ (header)**

```java
/**
 *íŠ¹ì • í—¤ë”ë¡œ ì¶”ê°€ ë§¤í•‘
 * headers="mode",
 * headers="!mode"
 * headers="mode=debug"
 * headers="mode!=debug" (! = )
 */
@GetMapping(value = "/mapping-header", headers = "mode=debug")
public String mappingHeader() {
    log.info("mappingHeader");
    return "ok";
}
```

íŒŒë¼ë¯¸í„°ì™€ ìœ ì‚¬í•˜ì§€ë§Œ HTTP í—¤ë”ë¥¼ ì‚¬ìš©í•œë‹¤.

**@RequestMapping - í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type (consumes)**

```java
/**
 * Content-Type í—¤ë” ê¸°ë°˜ ì¶”ê°€ ë§¤í•‘ Media Type
 * consumes="application/json"
 * consumes="!application/json"
 * consumes="application/*"
 * consumes="*\/*"
 * MediaType.APPLICATION_JSON_VALUE
 */
@PostMapping(value = "/mapping-consume", consumes = "application/json")
public String mappingConsumes() {
    log.info("mappingConsumes");
    return "ok";
}
```

HTTP ìš”ì²­ì˜ Content-Type í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.

ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 415 ìƒíƒœì½”ë“œ(Unsupported Media Type)ë¥¼ ë¦¬í„´í•œë‹¤.

**@RequestMapping - Accept í—¤ë” ê¸°ë°˜ Media Type ì½˜í…ì¸  ë„¤ê³ ì‹œì—ì´ì…˜ ( produces )**

```java
/**
 * Accept í—¤ë” ê¸°ë°˜ Media Type ( ì½˜í…ì¸  ë„¤ê³ ì‹œì—ì´ì…˜ )
 * produces = "text/html"
 * produces = "!text/html"
 * produces = "text/*"
 * produces = "* \/*"
*/
@PostMapping(value = "/mapping-produce", produces = "text/html")
public String mappingProduces() {
    log.info("mappingProduces");
    return "ok";
}
```

HTTP ìš”ì²­ì˜ Accept í—¤ë”ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë””ì–´ íƒ€ì…ìœ¼ë¡œ ë§¤í•‘í•œë‹¤.

ë§Œì•½ ë§ì§€ ì•Šìœ¼ë©´ HTTP 406 ìƒíƒœì½”ë“œ(Not Acceptable)ë¥¼ ë°˜í™˜í•œë‹¤.

ì—¬ê¸°ê¹Œì§€ëŠ” HttpServletRequestê°€ ì œê³µí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ì‹ì„ ì‚´í´ë³´ì•˜ê³  ì´ì œë¶€í„° ìŠ¤í”„ë§ìœ¼ë¡œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ë‹¤.

**@RequestParam**

```java
// @RequestParam ì‚¬ìš© - String, int, Integer ê°™ì€ ë‹¨ìˆœ íƒ€ì…
@ResponseBody
@RequestMapping("/request-param")
public String requestParamV2(@RequestParam("username") String username,
                           @RequestParam("age") int age) throws IOException
{
    log.info("username = {}, age={}", username, age);
    return "OK";
}
```

@RequestParam ì— íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”©í•´ì„œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

@RequestParamì˜ name(value) ì†ì„±ì´ íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

> @RequestParam("username") StringÂ memberNameÂ 
â†’ request.getParameter("username")
> 

@PathVariableê³¼ ë§ˆì°¬ê°€ì§€ë¡œ @RequestParamì—ì„œë„ ë³€ìˆ˜ì´ë¦„ê³¼ valueê°€ ê°™ìœ¼ë©´ valueë¥¼ ìƒëµí•  ìˆ˜ ìˆë‹¤.

ë˜í•œ String, int, Integerì™€ ê°™ì€ ë‹¨ìˆœ íƒ€ì…ì¼ ê²½ìš°ì—ëŠ” @RequestParamë„ ìƒëµí•  ìˆ˜ ìˆë‹¤. ë‹¤ë§Œ ëª…ì‹œì ì´ì§€ ì•Šì•„ ì½ëŠ” ì‚¬ëŒì´ ì½ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆì–´ ê¶Œì¥í•˜ì§„ ì•ŠëŠ”ë‹¤.

@RequestParamì€ ì†ì„±ì„ í†µí•´ í•„ìˆ˜ íŒŒë¼ë¯¸í„°ì™€ ê¸°ë³¸ê°’ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```java
@ResponseBody
@RequestMapping("/request-param-default")
public String requestParamDefault(
        @RequestParam(required = true, defaultValue = "guest") String username,
        @RequestParam(required = false, defaultValue = "1") Integer age) {
    log.info("username={}, age={}", username, age);
    return "OK";
}
```

required ì˜µì…˜ì„ trueë¡œ ì„¤ì •í•œ íŒŒë¼ë¯¸í„°ëŠ” ìš”ì²­ ì‹œ í•„ìˆ˜ì ìœ¼ë¡œ ìˆì–´ì•¼ í•œë‹¤.

> ì£¼ì˜ : ë¹ˆ ë¬¸ì("")ë„ í†µê³¼í•œë‹¤. â†’ (?username=""&age=20)
> 

defaultValue ì˜µì…˜ì„ ì„¤ì •í•œ íŒŒë¼ë¯¸í„°ëŠ” ìš”ì²­ ì‹œ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ defaultValueë¡œ ì„¤ì •ëœë‹¤.

defaultValueë¥¼ trueë¡œ ì„¤ì •í•œ ê²½ìš° required ì˜µì…˜ì€ ì˜ë¯¸ê°€ ì‚¬ë¼ì§„ë‹¤. ( ë””í´íŠ¸ë¡œ ê°’ì´ ì„¤ì •ë˜ë¯€ë¡œ )

> defaultValueëŠ” ë¹ˆ ë¬¸ìì˜ ê²½ìš°ì—ë„ ì„¤ì •í•œ ê¸°ë³¸ ê°’ì´ ì ìš©ëœë‹¤.
> 

ë˜í•œ @RequestParamì€ Map, MultiMapì„ í†µí•œ íŒŒë¼ë¯¸í„° ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤.

```java
@ResponseBody
@RequestMapping("/request-param-map")
public String requestParamMap(@RequestParam Map<String,Object> paramMap)
{
    log.info("username={}, age={}", paramMap.get("username"), paramMap.get("age"));
    return "OK";
}

@ResponseBody
@RequestMapping("/request-param-Multimap")
public String requestParamMap(@RequestParam MultiValueMap<String, Object> paramMultiMap)
{
    log.info("username={}, age={}", paramMultiMap.get("username"), paramMultiMap.get("age"));
    return "OK";
}
```

ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ê°’ì´ 1ê°œê°€ í™•ì‹¤í•˜ë‹¤ë©´ Map ì„ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ MultiValueMapì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

**@ModelAttribute**

```java
@Data // @Setter, @Getter, @Tostring, @EqualsAndHashCode, @RequiredArgsConstructor
public class HelloData {
    private String username;
    private int age;
}
```

ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°”ì¸ë”©í•œ ê°ì²´ê°€ ìœ„ì™€ ê°™ì„ ë•Œ ë‹¤ìŒ ì½”ë“œì™€ ê°™ì´ @ModelAttributeë¥¼ í†µí•´ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ”ë‹¤.

```java
@ResponseBody
@RequestMapping("/model-attribute-v1")
public String modelAttributeV1(@ModelAttribute HelloData helloData)
{
    log.info("username = {} , age = {} ", helloData.getUsername(), helloData.getAge());
    log.info("data = {}",helloData);

    return "ok";
}
```

> ìŠ¤í”„ë§ MVCì—ì„œëŠ” @ModelAttributeê°€ ìˆìœ¼ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•œë‹¤.
> 
> 1. HelloData ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
> 2. ìš”ì²­ íŒŒë¼ë¯¸í„°ì˜ ì´ë¦„ìœ¼ë¡œ HelloData ê°ì²´ì˜ property (username, age)ë¥¼ ì°¾ëŠ”ë‹¤.
> 3. í•´ë‹¹ í”„ë¡œí¼í‹°ì˜ setterë¥¼ í˜¸ì¶œí•´ íŒŒë¼ë¯¸í„°ì˜ ê°’ì„ ì…ë ¥(ë°”ì¸ë”©)í•˜ì—¬Â ê°ì²´ì— ê°’ì„ ì£¼ì…í•œë‹¤.
> 
> ex) username -> setUsername() ë©”ì†Œë“œë¥¼ ì°¾ì•„ ê°’ ì£¼ì…
> 
> â—ï¸ë°”ì¸ë”© ì˜¤ë¥˜ : age=abc ì™€ ê°™ì´ ìˆ«ìê°€ ë“¤ì–´ê°€ì•¼ í•  ê³³ì— ë¬¸ìê°€ ë“¤ì–´ê°€ë©´ BindException ì˜ˆì™¸ê°€ ë°œìƒ
> 

@ModelAttribute ë˜í•œ ìƒëµ ê°€ëŠ¥í•˜ë‹¤.
í•˜ì§€ë§Œ @RequestParam ë„ ìƒëµ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— í˜¼ë€ì´ ë°œìƒí•  ìˆ˜ ìˆì–´ ê¶Œì¥í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.

**ë‹¨ìˆœ í…ìŠ¤íŠ¸**

ìš”ì²­ íŒŒë¼ë¯¸í„°ì™€ ë‹¤ë¥´ê²Œ HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ í†µí•´ ë°ì´í„°ê°€ ì§ì ‘ ë„˜ì–´ì˜¤ëŠ” ê²½ìš°ì—ëŠ” HTML Form í˜•ì‹ìœ¼ë¡œ ì „ë‹¬ë˜ëŠ” ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ @RequestParamê³¼ @ModelAttributeë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. 

HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë°ì´í„°ëŠ” InputStreamì„ ì‚¬ìš©í•´ ì§ì ‘ ì½ì„ ìˆ˜ ìˆë‹¤.

```java
/**
 * @param inputStream    : HTTP ìš”ì²­ ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ì§ì ‘ ì¡°íšŒ
 * @param responseWriter : HTTP ì‘ë‹µ ë©”ì‹œì§€ì˜ ë°”ë””ì— ì§ì ‘ ê²°ê³¼ ì¶œë ¥
 * @return
 * @throws IOException
 */
@PostMapping("/request-body-string-v2")
public void requestBodyStringV2(InputStream inputStream, Writer responseWriter) throws IOException {
    String messagebody = StreamUtils.copyToString(inputStream, StandardCharsets.UTF_8);
    log.info("messageBody = {}", messagebody);
    responseWriter.write("ok");
}
```

ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤.

- InputStream(Reader): HTTP ìš”ì²­ ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ì§ì ‘ ì¡°íšŒ
- OutputStream(Writer): HTTPÂ ì‘ë‹µ ë©”ì‹œì§€ì˜ ë°”ë””ì— ì§ì ‘ ê²°ê³¼ ì¶œë ¥

HttpEntityë¥¼ í†µí•´ì„œë„ ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤

```java
 		/**
     * HttpEntity íŒ¨í‚¤ì§€ ì‚¬ìš©
     * @param httpEntity
     * @return
     * @throws IOException
     */
    @PostMapping("/request-body-string-v3")
    public HttpEntity<String> requestBodyStringV3(HttpEntity<String> httpEntity) throws IOException {

        String messagebody = httpEntity.getBody();
        log.info("messageBody = {}", messagebody);

        return new HttpEntity<String>("ok");

//        return new ResponseEntity<>("ok", HttpStatus.CREATED);
// RequestEntity, ResponseEntityëŠ” HttpEntityë¥¼ ìƒì†ë°›ì€ ê°ì²´ë¡œ 
// RequestEntityëŠ” HttpMethod, url ì •ë³´ê°€ ì¶”ê°€ë˜ì–´ , requestì—ì„œ ì‚¬ìš©
// ResponseEntityëŠ” HTTP ìƒíƒœì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , responseì—ì„œ ì‚¬ìš©
    }
```

HttpEntity ëŠ” HTTP í—¤ë”, body ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” ê°ì²´ì´ë‹¤.

ìš”ì²­ ë¿ë§Œ ì•„ë‹ˆë¼ ì‘ë‹µì—ì„œë„ HttpEntityë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

ìŠ¤í”„ë§ MVCëŠ” ë‹¤ìŒ íŒŒë¼ë¯¸í„°ë¥¼ ì§€ì›í•œë‹¤.

- HttpEntity: HTTP header, body ì •ë³´ë¥¼ í¸ë¦¬í•˜ê²Œ ì¡°íšŒ
    - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ë¥¼ ì§ì ‘ ì¡°íšŒ
    - ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ê³¼ ê´€ê³„ ì—†ìŒ @RequestParam X, @ModelAttribute X
- HttpEntityëŠ” ì‘ë‹µì—ë„ ì‚¬ìš© ê°€ëŠ¥
    - ë©”ì‹œì§€ ë°”ë”” ì •ë³´ ì§ì ‘ ë°˜í™˜
    - í—¤ë” ì •ë³´ í¬í•¨ ê°€ëŠ¥
    - view ì¡°íšŒ X
    

ë˜í•œ @RequestBodyë¥¼ ì‚¬ìš©í•œ ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒë„ ê°€ëŠ¥í•˜ë‹¤.

```java
/**
 * @RequestBody ì‚¬ìš© - ì‹¤ë¬´ì—ì„œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
 * @param messageBody
 * @return
 */
@ResponseBody
@PostMapping("/request-body-string-v4")
public String requestBodyStringV4(@RequestBody String messageBody)
{
    log.info("message body = {}",messageBody);
    return "OK";
}
```

ë§Œì•½ í—¤ë” ì •ë³´ê°€ í•„ìš”í•˜ë‹¤ë©´ HttpEntityë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ @RequestHeaderë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

ğŸ’¡ ì´ë ‡ê²Œ ë©”ì‹œì§€ ë°”ë””ë¥¼ ì§ì ‘ ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì€ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°íšŒí•˜ëŠ” @RequestParam, @ModelAttributeì™€ëŠ” ì „í˜€ ê´€ê³„ê°€ ì—†ë‹¤.

ìš”ì²­ íŒŒë¼ë¯¸í„° ì¡°íšŒ : @RequestParam, @ModelAttribute

ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒ : @RequestBody

**JSON**

ë‹¨ìˆœ í…ìŠ¤íŠ¸í˜•ì‹ì˜ ë©”ì‹œì§€ë°”ë””ì™€ Jsoní˜•ì‹ì˜ ë©”ì‹œì§€ ë°”ë”” ì¡°íšŒëŠ” í¬ê²Œ ë‹¤ë¥´ì§€ ì•Šë‹¤.

```java
@ResponseBody
@PostMapping("/request-body-json-v2")
public String requestBodyJsonV2(@RequestBody String messagebody) throws IOException
{
    HelloData data = objectMapper.readValue(messagebody, HelloData.class);
    log.info("username = {} , age = {}", data.getUsername(), data.getAge());
    return "Ok";
}
```

ë‹¨ìˆœ í…ìŠ¤íŠ¸ì²˜ëŸ¼ @RequestBodyë¥¼ ì‚¬ìš©í•´ HTTP ë©”ì‹œì§€ì—ì„œ ë°ì´í„°ë¥¼ êº¼ë‚´ê³  messagebodyì— ì €ì¥í•œë‹¤.

ë¬¸ìë¡œ ëœ JSON ë°ì´í„°ì¸ messagebodyë¥¼ objectMapperë¥¼ í†µí•´ ìë°” ê°ì²´ë¡œ ë³€í™˜í•œë‹¤.

ğŸ’¡ â—ï¸@RequestBodyëŠ” ìƒëµì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.

ìŠ¤í”„ë§ì€ @ModelAttribute, @RequestParamê³¼ ê°™ì€ ì–´ë…¸í…Œì´ì…˜ì„ ìƒëµí•  ë•Œ ì•„ë˜ ê·œì¹™ì„ ì ìš©í•œë‹¤.

- String , Integer, int ì™€ ê°™ì€ ë‹¨ìˆœ íƒ€ì… = @RequestParam
- ê·¸ ì™¸ì˜ íƒ€ì… = @ModelAttribute ( argument resolverë¡œ ì§€ì •í•´ë‘” íƒ€ì…ì„ ì œì™¸í•œ ëª¨ë“  íƒ€ì…)

ë”°ë¼ì„œ ì´ ê²½ìš° HelloDataì— @RequestBodyë¥¼ ìƒëµí•˜ë©´ @ModelAttributeê°€ ì ìš©ë˜ì–´ ë²„ë¦¬ê¸° ë•Œë¬¸ì— ë©”ì‹œì§€ ë°”ë””ê°€ ì•„ë‹Œ ìš”ì²­ íŒŒë¼ë¯¸í„°ë¥¼ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.


@RequestBodyì— Stringì´ ì•„ë‹Œ ê°ì²´ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.

```java
// @RequestBodyì— ê°ì²´ë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ì§€ì •í•  ìˆ˜ ìˆë‹¤.
@ResponseBody
@PostMapping("/request-body-json-v3")
public String requestBodyJsonV3(@RequestBody HelloData data)
{
    log.info("username = {}, age = {}",data.getUsername(),data.getAge());
    return "OK";
}
```

@RequestBodyë‚˜ HttpEntityë¥¼ ì‚¬ìš©í•˜ë©´ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ê°€ HTTP ë©”ì‹œì§€ ë°”ë””ì˜ ë‚´ìš©ì„ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë¬¸ìë‚˜ ê°ì²´ ë“±ìœ¼ë¡œ ë³€í™˜í•´ ì¤€ë‹¤.


ğŸ’¡ HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ëŠ” ë‚´ë¶€ì—ì„œ ObjectMapperë¥¼ í˜¸ì¶œí•œë‹¤.


ì•„ë˜ëŠ” HttpEntityë¥¼ ì‚¬ìš©í•œ ì½”ë“œì´ë‹¤.

```java
@ResponseBody
@PostMapping("/request-body-json-v4")
public String requestBodyJsonV4(HttpEntity<HelloData> dataHttpEntity)
{
    HelloData data = dataHttpEntity.getBody();
    log.info("username = {}, age = {}",data.getUsername(),data.getAge());
    return "OK";
}
```

ìš”ì²­ ë§¤í•‘ì€ ì•„ë‹ˆì§€ë§Œ @ResponseBodyì— Stringì´ ì•„ë‹Œ ê°ì²´ë¥¼ ë¦¬í„´í•  ê²½ìš°ë„ ì¶”ê°€ë¡œ ì‚´í´ë³´ìë©´

```java
@ResponseBody
@PostMapping("/request-body-json-v5")
public HelloData requestBodyJsonV5(@RequestBody HelloData data)
{
    log.info("username = {}, age = {}", data.getUsername(),data.getAge());
    return data;
}
```

ìœ„ì—ì„œ ì‚´í´ë³´ì•˜ ë“¯ ìŠ¤í”„ë§ì— ë‚´ì¥ëœ Jacksonì˜ ObjectMapper í´ë˜ìŠ¤ê°€ ê°ì²´ ì •ë³´ë¥¼ JSON í˜•íƒœë¡œ ë³€í™˜ ì‹œì¼œ ë©”ì‹œì§€ ë°”ë””ì— ë¦¬í„´í•œë‹¤. 

ì´ê²ƒ ë˜í•œ ë§ˆì°¬ê°€ì§€ë¡œ HttpEntityë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤.

> @RequestBody ìš”ì²­ : JSON ìš”ì²­ ->Â HTTP ë©”ì‹œì§€ ì»¨ë²„í„°Â -> ê°ì²´
> 
> 
> @ResponseBody ì‘ë‹µ : ê°ì²´ ->Â HTTP ë©”ì‹œì§€ ì»¨ë²„í„°Â -> JSON ì‘ë‹µ
>