# 📌 Entity는 무엇인가요?

데이터의 집합을 의미하며, 저장되고 관리되어야 하는 데이터이다.

실질적으로 **DB의 테이블과 매칭**된다.

직접적으로 DB와 연결되어있기 때문에 DB와 내용이 다르면 안된다.  

&nbsp;
## 영속성은 무엇일까요?

영속성(Persistence)은 데이터나 객체의 상태를 유지하고, 이를 영구적으로 저장하고 관리하는 기능을 의미한다. 

&nbsp;
## 영속성 컨텍스트란?

영속성 컨텍스트는 영속성을 가지는 공간이다.

애플리케이션과 데이터베이스 사이에서 **entity들이 DB로 바로 가지 않고, entity를 저장하는 환경으로서의 역할**을 한다.

객체를 보관하는 가상의 데이터베이스 같은 역할을 한다.

&nbsp;
### 특징

- 엔티티 매니저를 생성할 때마다 독립적으로 만들어진다.
- 엔티티 매니저를 통해서 영속성 컨텍스트에 접근하고 관리할 수 있다.

  jpa에서 entityManagerFactory에서 생성된 entityManager를 통해 영속성 컨텍스트에 접근한다.

&nbsp;
## Entity의 생명주기는 어떻게 되나요?

엔티티의 생명주기는 다음과 같다.

- 비영속: 영속성 컨텍스트와 전혀 관계가 없는 상태
- 영속: 영속성 컨텍스트에 저장된 상태
- 준영속: 영속성 컨텍스트에 저장되었다가 분리된 상태, 비영속과의 차이는 영속이 된적이 있는가.
- 삭제: 삭제된 상태,1차 캐시와 DB에 모두 삭제된 상태를 의미

![image](https://github.com/inu-appcenter/server-study-16th/assets/62889359/b96c020a-104d-4a2c-87f0-2fcff611e4bc)

&nbsp;
## Entity에 관련된 어노테이션은 무엇이 있나요?

&nbsp;
### **1. @Entity**

@Entity는 DB테이블에 대응하는 하나의 클래스이다.

해당 어노테이션이 붙은 클래스는 JPA가 관리해주며, JPA 이용해 매핑할 클래스는 @Entity를 붙여야만 매핑이 가능하다.


&nbsp;
### **2. @Getter**

@Getter는 엔티티의 필드를 조회할 때 사용하는 어노테이션으로 반드시 필요하다.
&nbsp;
### **3. @NoArgsConstructor**

@NoArgsConstructor는 파라미터가 없는 기본 생성자를 자동으로 생성해주는 어노테이션이다.

JPA는 기본적으로 **기본 생성자를 요구**한다.

JPA에서는 **자바 객체로 매핑할 때 기본 생성자를 통해 객체를 만들기 때문이다.**

그래서 Entity에는 @NoArgsConstructor 어노테이션을 반드시 붙여주어야 한다.

&nbsp;
### **4. @Table(name = "")**

@Table(name = "")는 Database에 생성될 table의 이름을 지정할 때 사용되는 어노테이션이다.

&nbsp;
### **5. @Id, @GeneratedValue**

**@Id**는 DB의 **pk(고유키)를** 매칭해주는 어노테이션이다.

id라는 값에 @Id 어노테이션을 붙여줌으로써 id는 해당 DB의 고유키와 매칭된 셈이다.

**@GeneratedValue**는 **기본키 생성을 DB에 위임**해주는 어노테이션이다.

&nbsp;
### **6. @Column(nullable = false, unique = true)**

@Column은 객체 필드를 테이블의 컬럼에 매핑시켜주는 어노테이션이다.

괄호 안에 해당 컬럼의 **제약조건** 을 입력할 수 있다.

nullable = false, unique = true 처럼 null값이 들어오지 못하게 한다거나, unique키로 지정해서 중복을 제거하는 등의 원하는 제약 조건을 입력해주면 된다.
